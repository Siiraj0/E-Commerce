<%- include('../layouts/user/userHeader.ejs') %>
<body>
  <div class="m ain-wrapper">
    <header class="header-area section-padding-1">
      <div class="container-fluid">
          <div class="row align-items-center">
              <!-- Left side with Home and Shop -->
              <div class="col-xl-4 col-lg-4 d-flex justify-content-start">
                  <div class="main-menu menu-lh-1 main-menu-padding-1">
                      <nav>
                          <ul class="d-flex">
                              <li><a href="/">Home</a></li>
                              <li><a href="/shop">Shop</a></li>
                          </ul>
                      </nav>
                  </div>
              </div>
  
              <!-- Centered Logo -->
              <div class="col-xl-4 col-lg-4 d-flex justify-content-center">
                  <div class="logo logo-width">
                      <a href="/">
                          <img src="user/assets/images/logo/logo.png" alt="logo">
                      </a>
                  </div>
              </div>
  
              <!-- Right side with Wishlist, Cart, Search, and Account -->
              <div class="col-xl-4 col-lg-4 d-flex justify-content-end">
                  <div class="header-right-wrap header-right-flex">
                      <div class="same-style header-wishlist">
                          <a href="wishlist.html"><i class="far fa-heart"></i></a>
                      </div>
                      <div class="same-style cart-wrap">
                          <a href="#" class="cart-active">
                              <i class="dlicon shopping_bag-20"></i>
                              <span class="count-style">02</span>
                          </a>
                      </div>
                      <div class="same-style header-search">
                          <a class="search-active" href="#"><i class="dlicon ui-1_zoom"></i></a>
                      </div>
                      <div class="same-style header-off-canvas">
                          <a href="/login">
                              <i class="far fa-user" style="font-size: 20px; color: black;" onmouseover="this.style.color='red'" onmouseout="this.style.color='black'"></i>
                          </a>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </header>
  
    <div class="header-small-mobile section-padding-1">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-6">
            <div class="mobile-logo logo-width">
              <a href="index.html">
                <img alt="" src="user/assets/images/logo/logo.png" />
              </a>
            </div>
          </div>
          <div class="col-6">
            <div class="mobile-header-right-wrap">
              <div class="header-right-wrap header-right-flex">
                <div class="same-style cart-wrap">
                  <a href="/cart" class="cart-active">
                    <i class="dlicon shopping_bag-20"></i>
                    <span class="count-style"><%= cartcount  %></span>
                  </a>
                </div>
                <div class="same-style header-off-canvas">
                  <a class="header-aside-button" href="#">
                    <i class="dlicon ui-3_menu-left"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- search start -->
    <div class="search-content-wrap main-search-active">
      <a class="search-close"><i class="dlicon ui-1_simple-remove"></i></a>
      <div class="search-content">
        <p>Start typing and press Enter to search</p>
        <form class="search-form" action="#">
          <input type="text" placeholder="Search" />
          <button class="button-search">
            <i class="dlicon ui-1_zoom"></i>
          </button>
        </form>
      </div>
    </div>
  
    <!-- aside start -->
    <div class="header-aside-active">
      <div class="header-aside-wrap">
        <a class="aside-close"><i class="dlicon ui-1_simple-remove"></i></a>
        <div class="header-aside-content">
          <div class="mobile-menu-area">
            <div class="mobile-search">
              <form class="search-form" action="#">
                <input type="text" placeholder="Search entire store…" />
                <button class="button-search">
                  <i class="dlicon ui-1_zoom"></i>
                </button>
              </form>
            </div>
            <div class="mobile-menu-wrap">
              <!-- mobile menu start -->
              <div class="mobile-navigation">
                <!-- mobile menu navigation start -->
                <nav>
                  <ul class="mobile-menu">
                    <li class="menu-item-has-children">
                      <a href="/">Home</a>
                      
                    </li>
                    <li class="menu-item-has-children">
                      <a href="#">Pages</a>
                   
                    </li>
                    <li class="menu-item-has-children">
                      <a href="/shop">shop</a>
                     
                    </li>
                    <li class="menu-item-has-children">
                      <a href="shop-collection-1.html">Collection</a>
                      
                    </li>
                    <li class="menu-item-has-children">
                      <a href="blog.html">Blog</a>
                     
                    </li>
                    <li><a href="shop-instagram.html">Instagram Shop </a></li>
                  </ul>
                </nav>
                <!-- mobile menu navigation end -->
              </div>
              <!-- mobile menu end -->
            </div>
            <div class="mobile-curr-lang-wrap">
             
             
              <div class="single-mobile-curr-lang">
                <a class="mobile-account-active" href="#"
                  >My Account <i class="fa fa-angle-down"></i
                ></a>
                <div class="lang-curr-dropdown account-dropdown-active">
                  <ul>
                    <li><a href="/login">Login</a></li>
                    <li><a href="/register">Creat Account</a></li>
                    <li><a href="<%= locals.user? '/myaccount' : '/login' %>">My Account</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <img src="user/assets/images/icon-img/payments.png" alt="payment" />
          <p>
            Pellentesque mollis nec orci id tincidunt. Sed mollis risus eu nisi
            aliquet, sit amet fermentum justo dapibus.
          </p>
          <div class="aside-contact-info">
            <ul>
              <li>
                <i class="dlicon ui-2_time-clock"></i>Monday - Friday: 9:00 -
                19:00
              </li>
              <li><i class="dlicon ui-1_email-84"></i>Info@la-studioweb.com</li>
              <li><i class="dlicon tech-2_rotate"></i>(+55) 254. 254. 254</li>
              <li>
                <i class="dlicon ui-1_home-minimal"></i>Helios Tower 75 Tam
                Trinh Hoang - Ha Noi - Viet Nam
              </li>
            </ul>
          </div>
          <div class="social-icon-style mb-25">
            <a class="facebook" href="#"><i class="fa fa-facebook"></i></a>
            <a class="twitter" href="#"><i class="fa fa-twitter"></i></a>
            <a class="google-plus" href="#"
              ><i class="fa fa-google-plus"></i
            ></a>
            <a class="behance" href="#"><i class="fa fa-behance"></i></a>
          </div>
          <div class="copyright">
            <p>
              © 2021 <a href="https://hasthemes.com/">Toro.</a> All rights
              reserved
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="breadcrumb-area section-padding-1 bg-gray breadcrumb-ptb-1">
      <div class="container-fluid">
        <div class="breadcrumb-content text-center">
          <div class="breadcrumb-title">
            <h2>My Account</h2>
          </div>
        
        </div>
      </div>
    </div>
    <div class="container">
      <h1>Order Details</h1>
      <div class="order-top d-flex justify-content-between">
          <div class="order-info">
              <p><strong>Order ID:</strong> <%= order._id %></p>
              <p><strong>Order Date:</strong> <%= order.orderDate.toDateString() %></p>
              <p><strong>Coupon Discount:</strong> ₹<%= order.couponDiscount %></p>
              <p><strong>Payment Method:</strong> <%= order.payment %></p>
              <p><strong>Total Amount:</strong> ₹<%= order.orderAmount %></p>
              <p><strong>Payment Status:</strong> ₹<%= order.paymentStatus %></p>
          </div>
          <div class="address-info">
              <h4>Deliver To:</h4>
              <p><strong>Name:</strong><%= order.deliveryAddress.name %></p>
              <p><strong>Street Address:</strong><%= order.deliveryAddress.streetAddress %></p>
              <p><strong>City:</strong><%= order.deliveryAddress.city %></p>
              <p><strong>State:</strong> <%= order.deliveryAddress.state %></p>
              <p> <strong>Pincode:</strong><%= order.deliveryAddress.pincode %></p>
              <p><strong>Mobile:</strong><%= order.deliveryAddress.mobile %></p>
          
          </div>
      </div>
  
      <div class="order-products">
          <% order.products.forEach((e) => { %>
              <div class="product-box">
                  <img src="<%= e.productId.image[0] %>" alt="Product Image" class="product-image">
                  <div class="product-details">
                      <p class="product-name"><%= e.productId.name %></p>
                      <p class="product-price">₹<%= e.totalPrice %></p>
                      <p class="product-status"><%= e.orderStatus %></p>
                      <% if (e.productId.offerPercentage) { %>
                          <p class="offer-percentage"><%= e.productId.offerPercentage %>% off</p>
                      <% } %>
                  </div>
                  <% if (e.orderStatus !=='Cancelled' && e.orderStatus !== 'Returned' && e.orderStatus !== 'Delivered') { %>
                      <button class="cancel-button" type="button" onclick="cancelOrder('<%= order._id %>', '<%= e._id %>')">Cancel Order</button>
                  <% } else if (e.orderStatus === 'Returned') { %>
                      <p>Returned</p>
                  <% } else if (e.orderStatus=='Cancelled') { %>
                      <p>Cancelled</p>
                  <% } %>
  
                  <% if (e.orderStatus === 'Delivered' && e.orderStatus !=="Returned") { %>
                      <button class="return-button" type="button" onclick="returnOrder('<%= order._id %>', '<%= e._id %>')">Return Order</button>
                  <% } %>
              </div>
          <% }); %>
      </div>
  </div>
  

  <script src="your-custom-script.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
<script>


  function cancelOrder(orderId, productId) {
    axios.post('/order/cancel', { orderId, productId })
        .then(response => {
            alert(response.data.message);
            location.reload(); // Reload to reflect changes
        })
        .catch(error => {
            console.error('Error cancelling order:', error);
            alert('Failed to cancel order.');
        });
}

async function returnOrder(orderId, productId) {
  const {value: returnReason} = await Swal.fire({
                title: "Return reason",
                input: "text",
                inputLabel: "Return reason",
                showCancelButton: true,

                inputValidator: (value)=>{
                    if(!value){
                        return "Enter a valid reason"
                    }
                }
            })
            if(returnReason){

              axios.post('/order/return', { orderId, productId })
              .then(response => {
                alert(response.data.message);
                location.reload(); // Reload to reflect changes
              })
              .catch(error => {
                console.error('Error returning order:', error);
                alert('Failed to return order.');
              });
            }
}

</script>
  
  
  
</body>
  </div>
  


</div>

</div>

</div>

</div>

<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f0f2f5;
    margin: 0;
    padding: 0;
}

.container {
    max-width: 800px;
    margin: 30px auto;
    padding: 20px;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

h1 {
    text-align: center;
    color: #333;
    margin-bottom: 20px;
}

.order-top {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
}

.order-info {
    margin-bottom: 20px;
}

.order-info p {
    margin: 5px 0;
}

.address-info {
    max-width: 300px;
    text-align: right;
}

.address-info h4 {
    font-size: 18px;
    font-weight: bold;
    color: #333;
    margin-bottom: 10px;
}

.address-info p {
    margin: 5px 0;
    color: #555;
}

.order-products {
    margin-top: 20px;
}

.product-box {
    display: flex;
    align-items: center;
    padding: 10px;
    margin-bottom: 10px;
    background-color: #fafafa;
    border: 1px solid #ddd;
    border-radius: 10px;
    position: relative;
}

.product-image {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 10px;
    margin-right: 15px;
}

.product-details {
    flex: 1;
}

.product-name {
    font-size: 16px;
    font-weight: bold;
    color: #333;
    margin: 0;
}

.product-price {
    font-size: 14px;
    color: #777;
    margin: 5px 0;
}

.offer-percentage {
    font-size: 14px;
    color: #ff5722;
}

.cancel-button, .return-button {
    background-color: #f44336;
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 5px;
    margin-left: 10px;
    font-size: 14px;
}

.cancel-button:hover {
    background-color: #d32f2f;
}

.return-button {
    background-color: #4caf50;
}

.return-button:hover {
    background-color: #388e3c;
}

.tracking-line {
    position: absolute;
    bottom: 10px;
    left: 10px;
    height: 5px;
    width: 100%;
    background-color: #ddd;
    border-radius: 5px;
    overflow: hidden;
}

.tracking-status {
    height: 100%;
    background-color: #4caf50;
    transition: width 0.3s;
}

</style>
<!-- editAddress modal end  -->

</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    
    <footer class="footer-area bg-black section-padding-1">
      <div class="container-fluid">
          <div class="footer-top pt-95 pb-80">
              <div class="row">
                  <!-- Footer Column: Logo -->
                  <div class="col-12 text-center">
                      <div class="logo logo-res-center">
                          <a href="index.html">
                              <img src="user/assets/images/logo/logo-white.png" alt="logo">
                          </a>
                      </div>
                  </div>
              </div>
          </div>
          <div class="footer-bottom pb-15">
              <div class="row">
                  <div class="col-12">
                      <div class="copyright text-center">
                          <p>© 2024 <a href="https://hasthemes.com/">Toro.</a> All rights reserved.</p>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </footer>

   
  </div>


<!-- All css here -->



  <!-- All JS is here
============================================ -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  

    <!-- Modernizer JS -->
    <script src="user/assets/js/vendor/modernizr-3.11.7.min.js"></script>
    <!-- jquery -->
    <script src="user/assets/js/vendor/jquery-v3.6.0.min.js"></script>
    <!-- Popper JS -->
    <script src="user/assets/js/vendor/popper.js"></script>
    <!-- Bootstrap JS -->
    <script src="user/assets/js/vendor/bootstrap.min.js"></script>
    <script src="user/assets/js/plugins/owl-carousel.js"></script>
    <script src="user/assets/js/plugins/slick.js"></script>
    <script src="user/assets/js/plugins/jarallax.min.js"></script>
    <script src="user/assets/js/plugins/countdown.js"></script>
    <script src="user/assets/js/plugins/magnific-popup.js"></script>
    <script src="user/assets/js/plugins/instafeed.js"></script>
    <script src="user/assets/js/plugins/tilt.js"></script>
    <script src="user/assets/js/plugins/images-loaded.js"></script>
    <script src="user/assets/js/plugins/isotope.js"></script>
    <script src="user/assets/js/plugins/scrolloverflow-fullpage.js"></script>
    <script src="user/assets/js/plugins/fullpage.js"></script>
    <script src="user/assets/js/plugins/jquery-ui.js"></script>
    <script src="user/assets/js/plugins/jquery-ui-touch-punch.js"></script>
    <script src="user/assets/js/plugins/easyzoom.js"></script>
    <script src="user/assets/js/plugins/resizesensor.js"></script>
    <script src="user/assets/js/plugins/sticky-sidebar.js"></script>
    <script src="user/assets/js/plugins/scrollup.js"></script>
    <script src="user/assets/js/plugins/select2.min.js"></script>
    <script src="user/assets/js/plugins/cookie.js"></script>
    <script src="user/assets/js/plugins/bpopup.js"></script>
    <script src="user/assets/js/plugins/wow.js"></script>
    <script src="user/assets/js/plugins/ajax-mail.js"></script>
    <!-- Main JS -->
    <script src="user/assets/js/main.js"></script>

</body>

<!-- Mirrored from htmldemo.net/toro/toro/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 22 Feb 2024 11:04:56 GMT -->
</html>