<%- include('../layouts/admin/adminHeaders.ejs') %>
  

        <!-- Begin page -->
        <div id="layout-wrapper">
        
            <!-- header -->
           
            <%- include('../layouts/admin/pageTopbar.ejs') %>

            <!-- ========== Left Sidebar Start ========== -->
            
            <%- include('../layouts/admin/verticalMenu.ejs') %>

            <!-- Left Sidebar End -->
           
            <%- include('../layouts/admin/leftsidebarEnd.ejs') %>
    


            <!-- ============================================================== -->
            <!-- Start right Content here -->
            <!-- ============================================================== -->
            <div class="main-content">

                <div class="page-content">
                    <div class="container-fluid">

                        <!-- start page title -->
                        <div class="row">
                            <div class="col-12">
                                <div class="page-title-box d-flex align-items-center justify-content-between">
                                    <h4 class="mb-0">Welcome !</h4>

                                    <div class="page-title-right">
                                        <ol class="breadcrumb m-0">
                                            <li class="breadcrumb-item"><a href="javascript: void(0);">Symox</a></li>
                                            <li class="breadcrumb-item active">Welcome !</li>
                                        </ol>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- end page title -->

                     
                        <div class="row">
                            <div class="col-xl-8">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-wrap align-items-center mb-3">
                                            <h5 class="card-title mb-0">Sales Statistics</h5>
                                            <div class="ms-auto">
                                          
                                            </div>
                                        </div>

                                       <div class="row align-items-center">
                                        <div class="col-xl-8">
                                            <div>
                                                 <div id="sales-statistics" data-colors='["#eff1f3","#eff1f3","#eff1f3","#eff1f3","#33a186","#3980c0","#eff1f3","#eff1f3","#eff1f3", "#eff1f3"]' class="apex-chart"></div>
                                            </div>
                                          </div>
                                           <div class="col-xl-4">
                                               <div class="">
                                                    <div>
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <div class="d-flex">
                                                                <i class="mdi mdi-circle font-size-10 mt-1 text-primary"></i>
                                                                <div class="flex-1 ms-2">
                                                                    <p class="mb-0" >Product Shipped</p>
                                                                    <h5 id="productShipped" class="mt-1 mb-0 font-size-16"></h5>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <!-- <span class="badge badge-soft-primary">25.4%<i class="mdi mdi-arrow-down ms-2"></i></span> -->
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="mt-3 border-top pt-3">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <div class="d-flex">
                                                                <i class="mdi mdi-circle font-size-10 mt-1 text-primary"></i>
                                                                <div class="flex-1 ms-2">
                                                                    <p class="mb-0">Product Pending</p>
                                                                    <h5 id="productPending" class="mt-1 mb-0 font-size-16"></h5>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <!-- <span class="badge badge-soft-primary">17.4%<i class="mdi mdi-arrow-down ms-2"></i></span> -->
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="mt-3 border-top pt-3">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <div class="d-flex">
                                                                <i class="mdi mdi-circle font-size-10 mt-1 text-success"></i>
                                                                <div class="flex-1 ms-2">
                                                                    <p class="mb-0">Product Cancelled</p>
                                                                    <h5 id="productReturned" class="mt-1 mb-0 font-size-16"></h5>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <!-- <span class="badge badge-soft-success">16.3%<i class="mdi mdi-arrow-up ms-1"></i></span> -->
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="mt-3 border-top pt-3">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <div class="d-flex">
                                                                <i class="mdi mdi-circle font-size-10 mt-1 text-primary"></i>
                                                                <div class="flex-1 ms-2">
                                                                    <p class="mb-0">Product Delivered</p>
                                                                    <h5 id="productDelivered" class="mt-1 mb-0 font-size-16"></h5>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <!-- <span class="badge badge-soft-primary">65.7%<i class="mdi mdi-arrow-up ms-1"></i></span> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                               </div>
                                           </div>
                                           
                                       </div>

                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-4">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-wrap align-items-center">
                                            <h5 class="card-title mb-0">Sales By Category</h5>
                                            <div class="ms-auto">
                                               
                                            </div>
                                        </div>

                                        <div class="text-center mt-4">
                                            <canvas class="mx-auto" id="sales-category" height="281" data-colors='["#3980c0","#51af98", "#4bafe1", "#B4B4B5", "#f1f3f4"]'></canvas>
                                        </div>
                                        
                                        <div class="row mt-4">
                                            <div class="col">
                                                <div class="px-2">
                                                    <div class="d-flex justify-content-between align-items-center mt-sm-0 mt-2">
                                                        <div class="d-flex">
                                                            <i class="mdi mdi-circle font-size-10 mt-1 text-primary"></i>
                                                            <div class="flex-1 ms-2">
                                                                <p  class="mb-0 text-truncate">MENS</p>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <span id="MENS" class="fw-bold"></span>
                                                        </div>
                                                    </div>
    
                                                    <div class="d-flex justify-content-between align-items-center mt-2">
                                                        <div class="d-flex">
                                                            <i class="mdi mdi-circle font-size-10 mt-1 text-success"></i>
                                                            <div class="flex-1 ms-2">
                                                                <p class="mb-0 text-truncate">KIDS</p>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <span id="KIDS" class="fw-bold"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col">
                                               <div class="px-2">
                                                    <div class="d-flex justify-content-between align-items-center mt-sm-0 mt-2">
                                                        <div class="d-flex">
                                                            <i class="mdi mdi-circle font-size-10 mt-1 text-info"></i>
                                                            <div class="flex-1 ms-2">
                                                                <p class="mb-0 text-truncate">WOMANS:</p>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <span id="WOMANS" class="fw-bold"></span>
                                                        </div>
                                                    </div>

                                            
                                               </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                       
                        <div class="row">
                          
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="d-flex flex-wrap align-items-center">
                                            <h5 class="card-title mb-0">Manage Orders</h5>
                                           
                                        </div>
                                    </div>
                                    <div class="card-body pt-xl-1">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-centered align-middle table-nowrap mb-0">
                                                <thead >
                                                    <tr>
                                                        <th>No</th>
                                                        <th>Product's Name</th>
                                                        <th>Image</th>
                                                      
                                                        <!-- <th>Stock Left</th> -->
                                                        <th>Stock Brought</th>
                                                        <th>Price</th>
                                                        <th>Sales</th>
                                                        <th>Status</th>
                                                      
                                                    </tr>
                                                </thead>
                                                <tbody id="manageOrders">
                                                   
                        
                                                  
                        
                                                   
                                                    
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-5">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="d-flex flex-wrap align-items-center">
                                            <h5 class="card-title mb-0">Order Activity</h5>
                                          
                                        </div>
                                    </div>
                                    <div class="card-body px-0">
                                        <ol id="orderActivity" class="activity-feed mb-0 px-4" data-simplebar style="max-height: 377px;">
                                            <li class="feed-item">
                                                <div class="d-flex justify-content-between feed-item-list">
                                                    <div>
                                                        <h5 class="font-size-15 mb-1">Your Manager Posted</h5>
                                                        <p class="text-muted mt-0 mb-0">James Raphael</p>
                                                    </div>
                                                    <div>
                                                        <p class="text-muted mb-0">1 hour ago</p>
                                                    </div>
                                                </div>
                                            </li>
                                          
                        
                                        </ol>
    
                                    </div>
                                </div>
                        

                       
               </div>
                           <div class="col-xl-7">
                            <div class="card">
                                <div class="card-header">
                                    <div class="align-items-center d-flex">
                                        <h4 class="card-title mb-0 flex-grow-1">Top Users</h4>
                                        <div class="flex-shrink-0">
                                         
                                        </div>
                                    </div>
                                </div>

                                <div class="card-body px-0 pt-2">
                                    <div class="table-responsive px-3" data-simplebar style="max-height: 393px;">
                                        <table class="table table-borderless table-centered align-middle table-nowrap mb-0">
                                            <tbody id="topuser">
                                               
                                               
                                            </tbody>
                                        </table>
                                    </div> <!-- enbd table-responsive-->
                                </div>
                            </div>
                        </div>
                           
                        </div>

                    </div> <!-- container-fluid -->
                </div>
                <!-- End Page-content -->

                <div hidden id="adminId"><%=locals.admin%></div>
            
            </div>
            <!-- end main content-->

        </div>
        <!-- END layout-wrapper -->

        <!-- Right Sidebar -->
        <a   href="#" class="right-bar-toggle layout-setting-btn" id="right-bar-toggle">
            <i class="icon-sm mb-2" data-feather="settings"></i> <span class="align-middle">Settings</span>
        </a>

       
        <!-- /Right-bar -->

        <%- include('../layouts/admin/rightBar.ejs') %>  

        <!-- Right bar overlay-->
        <div class="rightbar-overlay"></div>

        <!-- JAVASCRIPT -->
        <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="assets/libs/metismenujs/metismenujs.min.js"></script>
        <script src="assets/libs/simplebar/simplebar.min.js"></script>
        <script src="assets/libs/feather-icons/feather.min.js"></script>

        <!-- apexcharts -->
        <script src="assets/libs/apexcharts/apexcharts.min.js"></script>
        <!-- Chart JS -->
        <script src="assets/js/pages/chartjs.js"></script>

        <script src="assets/js/pages/dashboard.init.js"></script>

        <script src="assets/js/app.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script>
            
            function storeAdminData(){
                const data=document.getElementById('adminId');
                window.localStorage.setItem('admin',JSON.stringify(data.textContent))                
            }
            async function topusers() {
                 const {data:{result}}=  await axios.get('/admin/topusers');
                 const element=document.getElementById('topuser')
                 let clutter="";
                 result.forEach(e=>{
                    clutter+=`
                                <tr>
                                            <td style="width: 20px;"><div style="width: 2rem; height: 2rem;color:white; border-radius: 50%; background-color: salmon; text-align: center; text-transform: capitalize; display: flex; align-items: center; justify-content: center;">${e.name.split('').splice(0,2).join('')}</div></td>
                                            <td>
                                                <h6 class="font-size-15 mb-1">${e.name}</h6>
                                                <p class="text-muted font-size-13 mb-0"><i class="mdi mdi-map-marker"></i> india</p>
                                            </td>
                                            <td class="text-muted"><i class="icon-xs icon me-2 text-success" data-feather="trending-up"></i>$${e.price}</td>
                                            <td><span class="badge badge-soft-success font-size-12">Active</span></td>
                                            <td>
                                              Qty: ${e.totalQuantity}
                                            </td>
                                        </tr>
                                                                `
                 })
                 element.innerHTML=clutter
                }
            async function recentOrder() {
               const {data:{result}}= await axios.get('/admin/RecentOrder')
               console.log(result);
               const element=document.getElementById("orderActivity")
               let clutter='' 
                result.forEach(e=>{
                    clutter+=` <li class="feed-item">
                                                                <div class="d-flex justify-content-between feed-item-list">
                                                                    <div>
                                                                        <h5 class="font-size-15 mb-1">${e.userId.name}</h5>
                                                                        <p class="text-muted mt-0 mb-0">${e.products?.[0]?.orderStatus}</p>
                                                                    </div>
                                                                    <div>
                                                                        <p class="text-muted mb-0">${e.orderDate}</p>
                                                                    </div>
                                                                   </div>
                                                            </li>`  
                })
                element.innerHTML=clutter
               
            }
            async function salesByCat() {
              const {data:{result}}=  await axios.get("/admin/salesByCat")
              for (const key in result) {
                const element=document.getElementById(key);

                element.textContent=result[key]
              }
            }
            async function OrderStausCount() {
              const {data:{statusCountObj}}= await axios.get('/admin/statusCount');
              const status=['Pending', 'Shipped', 'Delivered', 'Cancelled', 'Returned']
                for(const key in statusCountObj){
                    const element = document.getElementById(`product${key}`);
                    element.textContent = statusCountObj[key];
                    
                }
                status.forEach(e=>{
                    if(!statusCountObj[e]){
                        const element = document.getElementById(`product${e}`);
                        element.textContent = 0
                    }
                })
   
}
            async function salesStaticsChart(){
                const {data}= await axios.get('/admin/sales')
                    options = {
            series: [{ data: data.monthlyCounts
            }],   
            chart: {
                toolbar: { show: !1 },
                height: 350,
                type: "bar",
                events: { click: function (e, r, t) {} },
            },
            plotOptions: { bar: { columnWidth: "70%", distributed: !0 } },
            dataLabels: { enabled: !1 },
            legend: { show: !1 },
            colors: (barchartColors = getChartColorsArray("sales-statistics")),
            xaxis: {
                categories: [
                "Jan",
                "Feb",
                "Mar",
                "Apr",
                "May",
                "jun",
                "Jul",
                "Aug",
                "Sep",
                "Oct",
                ],
                labels: { style: { colors: barchartColors, fontSize: "12px" } },
            },
            };
            (chart = new ApexCharts(
            document.querySelector("#sales-statistics"),
            options
            )).render();
                }
            async function mangeOrders() {
                const {data:{result}}= await axios.get('/admin/mangeOrders');
                const element=document.getElementById('manageOrders');
                let clutter=""
              
                result.forEach((e,i)=>{
                    e.stockLeft=e.stockLeft<0?0:e.stockLeft;
                    const perce=((e.totalQuantityBought/(e.stockLeft+e.totalQuantityBought))*100);
                    
                    let color=(i%2==0)?'primary':'success';
                    clutter+=` <tr>
                                                        <td>${i+1}</td>
                                                        <td><a href="javascript: void(0);" class="text-body">${e.productName}</a> </td>
                                                        <td>
                                                            <div class="image" style="border-radius: 50%; width: 2rem; height: 2rem; overflow: hidden;">
                <img style="width: 100%;height: 100%;" src="${e.productImage}"/>
              </div>
                                                        </td>
                                                        
                                                   
                                                        <td>
                                                          ${e.totalQuantityBought} Items
                                                        </td>
                                                        <td>
                                                           $ ${e.productPrice}
                                                        </td>
                                                        <td>
                                                          $ ${e.totalAmount}
                                                        </td>
                                                        
                                                        <td style="width: 130px;">
                                                            <div class="progress" style="height: 6px;">
                                                                <div class="progress-bar progress-bar-striped bg-${color}" role="progressbar" style="width: ${perce}%" aria-valuenow=${perce}" aria-valuemin="0" aria-valuemax="${perce}">
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                        
                                                        </td>
                                                    </tr>`
                })
                element.innerHTML=clutter;
            }
            async function erningByitem() {
                var barchartColors = getChartColorsArray("earning-item"),
  options = {
    series: [
      {
        data: [
          {
            x: "Iphone",
            y: [
              new Date("2021-10-02").getTime(),
              new Date("2021-10-10").getTime(),
            ],
            fillColor: barchartColors[0],
          },
          {
            x: "Android",
            y: [
              new Date("2021-10-12").getTime(),
              new Date("2021-10-21").getTime(),
            ],
            fillColor: barchartColors[1],
          },
          {
            x: "Watch 8",
            y: [
              new Date("2021-10-06").getTime(),
              new Date("2021-10-16").getTime(),
            ],
            fillColor: barchartColors[0],
          },
          {
            x: "Books",
            y: [
              new Date("2021-10-12").getTime(),
              new Date("2021-10-22").getTime(),
            ],
            fillColor: barchartColors[1],
          },
          {
            x: "Speaker",
            y: [
              new Date("2021-10-05").getTime(),
              new Date("2021-10-16").getTime(),
            ],
            fillColor: barchartColors[0],
          },
          {
            x: "Cover",
            y: [
              new Date("2021-10-17").getTime(),
              new Date("2021-10-26").getTime(),
            ],
            fillColor: barchartColors[1],
          },
        ],
      },
    ],
    chart: { height: 381, type: "rangeBar", toolbar: { show: !1 } },
    plotOptions: { bar: { horizontal: !0, barHeight: "30%" } },
    xaxis: { type: "datetime" },
  };
(chart = new ApexCharts(
  document.querySelector("#earning-item"),
  options
)).render();
                // const {data:{result}}= await axios.get('/admin/erningByItem');
            }




            // calling
            erningByitem()
            salesByCat()
            topusers()
            recentOrder()
            OrderStausCount()
            salesStaticsChart()
            storeAdminData()
            mangeOrders()




      </script>

    </body>

<!-- Mirrored from themesdesign.in/symox-laravel/layouts/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 23 Feb 2024 16:06:55 GMT -->
</html>